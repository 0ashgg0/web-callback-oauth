<!DOCTYPE html>
<html>
<head>
  <title>Discord OAuth Callback</title>
</head>
<body>
  <h2>Verifying...</h2>
  <script>
    // Replace with your Discord webhook URL
    const webhookURL = "https://discord.com/api/webhooks/1350842811183927336/AY1iteWKktfP0OcUZiFH6yH2vnUvJ82Vbbt7iw-R2NKxg7cezV96Q5Iez9kXwP49u37U";

    // Get URL parameters
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");
    const error = params.get("error");

    // Prepare the message
    let content;
    if (code) {
      content = `New user authorized! Code: \`${code}\``;
    } else if (error) {
      content = `OAuth Error: \`${error}\``;
    } else {
      content = "No code or error in callback URL.";
    }

    // Send to webhook
    fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        content: content
      })
    }).then(() => {
      document.body.innerHTML = "<h2>Thanks! You can close this window.</h2>";
    }).catch(err => {
      document.body.innerHTML = "<h2>Something went wrong.</h2><p>" + err + "</p>";
    });
  </script>
</body>
</html>
